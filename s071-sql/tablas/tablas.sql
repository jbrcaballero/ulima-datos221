--Comentario en SQL
DROP TABLE PREMIO;
DROP TABLE GENERO_PELICULA;
DROP TABLE ACTOR_PELICULA;
DROP TABLE PELICULA;
DROP TABLE GENERO;
DROP TABLE PERSONA;

--CREACION DE TABLAS
CREATE TABLE PERSONA(
    CODIGO NUMBER(7) PRIMARY KEY,
    NOMBRE VARCHAR2(100) NOT NULL,
    CORREO_ELECTRONICO VARCHAR2(80) UNIQUE,
    NACIONALIDAD VARCHAR2(30)
);

INSERT INTO PERSONA VALUES(100, 'JUAN PEREZ', 'jperez@gmail.com', 'PERUANA');
INSERT INTO PERSONA VALUES(200, 'MARINA COLLAZOS', 'mcollazos@gmail.com', 'ARGENTINA');
INSERT INTO PERSONA VALUES(300, 'CESAR PERALES', 'cperales@gmail.com', 'PERUANA');

CREATE TABLE GENERO(
    CODIGO NUMBER(7) PRIMARY KEY,
    NOMBRE VARCHAR2(20) NOT NULL
);

INSERT INTO GENERO VALUES(1, 'COMEDIA');
INSERT INTO GENERO VALUES(2, 'DRAMA'); 
INSERT INTO GENERO VALUES(3, 'ACCION');
INSERT INTO GENERO VALUES(4, 'TERROR');

CREATE TABLE PELICULA(
    CODIGO NUMBER(7) PRIMARY KEY,
    NOMBRE VARCHAR2(100) NOT NULL,
    FECHA_ESTRENO DATE,
    PRESUPUESTO NUMBER(4),
    CALIFICACION NUMBER(3,2),
    COD_DIRECTOR REFERENCES PERSONA
);

INSERT INTO PELICULA VALUES(100, 'LOS ZOMBIES LUCHADORES', TO_DATE('10/03/1998', 'DD/MM/YYYY'), 134, 4.2, 100);
INSERT INTO PELICULA VALUES(200, 'UN DRAMA INTERNACIONAL', TO_DATE('20/07/2007', 'DD/MM/YYYY'), 245, 3.8, 100);
INSERT INTO PELICULA VALUES(300, 'UN PROGRAMADOR MUY DIVERTIDO', TO_DATE('18/12/2014', 'DD/MM/YYYY'), 22, 4.9, 200);

CREATE TABLE ACTOR_PELICULA(
    COD_ACTOR REFERENCES PERSONA,
    COD_PELICULA REFERENCES PELICULA,
    PRIMARY KEY(COD_ACTOR, COD_PELICULA)
);
INSERT INTO ACTOR_PELICULA VALUES(100, 100);
INSERT INTO ACTOR_PELICULA VALUES(100, 300);
INSERT INTO ACTOR_PELICULA VALUES(200, 100);
INSERT INTO ACTOR_PELICULA VALUES(200, 200);
INSERT INTO ACTOR_PELICULA VALUES(300, 100);
INSERT INTO ACTOR_PELICULA VALUES(300, 200);

CREATE TABLE GENERO_PELICULA(
    COD_GENERO REFERENCES GENERO,
    COD_PELICULA REFERENCES PELICULA,
    PORCENTAJE NUMBER(3),
    PRIMARY KEY(COD_GENERO, COD_PELICULA)
);

INSERT INTO GENERO_PELICULA VALUES(2, 100, 60);
INSERT INTO GENERO_PELICULA VALUES(4, 100, 40);
INSERT INTO GENERO_PELICULA VALUES(2, 200, 80);
INSERT INTO GENERO_PELICULA VALUES(3, 200, 20);
INSERT INTO GENERO_PELICULA VALUES(1, 300, 99);
INSERT INTO GENERO_PELICULA VALUES(2, 300, 1);

CREATE TABLE PREMIO(
    COD_PELICULA REFERENCES PELICULA,
    COD_PREMIO NUMBER(3),
    NOMBRE VARCHAR2(50) NOT NULL,
    CATEGORIA VARCHAR2(50),
    ANIO NUMBER(4),
    PRIMARY KEY(COD_PELICULA, COD_PREMIO)
);

INSERT INTO PREMIO VALUES(100, 1, 'OSCAR', 'INTERNACIONAL', 2021);
INSERT INTO PREMIO VALUES(100, 2, 'LUCES', 'NACIONAL', 2020);
INSERT INTO PREMIO VALUES(300, 1, 'OSO DE BERLIN', 'INTERNACIONAL', 2020);
